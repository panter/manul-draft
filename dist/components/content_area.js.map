{"version":3,"sources":["../../src/components/content_area.jsx"],"names":["MegadraftEditor","ContentAreaEditor","readOnly","contentId","isEditing","entityInputs","editorState","setEditorState","megadraftActions","blockRenderMap","megadraftBlockPlugins","saveAndClose","saveAndEdit","cancelEditing","locale","copyLocales","copyFromLocale","handleContainerOverflow","position","backgroundColor","zIndex","bottom","left","right","ContentArea","className","style","canEdit","blockPluginDialogIsActive","startEditing","editorProps","displayName"],"mappings":"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","file":"content_area.js","sourcesContent":["import { MegadraftEditor as MegadraftEditorOrg } from 'megadraft'\nimport { Modal } from 'react-overlays'\nimport ModalManager from 'react-overlays/lib/ModalManager'\nimport { compose, withState, pure } from 'recompose'\n\nimport React from 'react'\n\nimport AreaActionsToolbar from './area_actions_toolbar'\nimport ContentAreaWrapper from '../containers/content_area_wrapper'\n\n// quickfix for https://github.com/globocom/megadraft/issues/97\nclass MegadraftEditor extends MegadraftEditorOrg {\n  /* eslint class-methods-use-this: 0*/\n  setReadOnly() {\n    // do nothing\n  }\n}\n\nconst ContentAreaEditor = pure(\n  ({\n    readOnly,\n    contentId,\n    isEditing,\n    entityInputs,\n    editorState,\n    setEditorState,\n    megadraftActions,\n    blockRenderMap,\n    megadraftBlockPlugins = [],\n    saveAndClose,\n    saveAndEdit,\n    cancelEditing,\n    locale,\n    copyLocales,\n    copyFromLocale\n  }) => (\n    <div>\n      <MegadraftEditor\n        key={`${contentId}${isEditing ? '_editing' : ''}`} // force rerender\n        editorKey={contentId}\n        actions={megadraftActions}\n        plugins={megadraftBlockPlugins}\n        readOnly={readOnly}\n        editorState={editorState}\n        entityInputs={entityInputs}\n        blockRenderMap={blockRenderMap}\n        onChange={setEditorState}\n      />\n      {isEditing && (\n        <Modal\n          manager={new ModalManager({ handleContainerOverflow: false })}\n          backdrop={false}\n          show\n          autoFocus={false}\n          style={{\n            position: 'fixed',\n            backgroundColor: '#ffffff99',\n            zIndex: 100,\n            bottom: 0,\n            left: 0,\n            right: 0\n          }}\n        >\n          <AreaActionsToolbar\n            saveAndClose={saveAndClose}\n            saveAndEdit={saveAndEdit}\n            cancelEditing={cancelEditing}\n            locale={locale}\n            copyLocales={copyLocales}\n            copyFromLocale={copyFromLocale}\n          />\n        </Modal>\n      )}\n    </div>\n  )\n)\n\nconst ContentArea = pure(\n  ({\n    isEditing,\n    entityInputs,\n    editorState,\n    setEditorState,\n    megadraftActions,\n    blockRenderMap,\n    megadraftBlockPlugins = [],\n    contentId,\n    className,\n    style,\n    canEdit,\n    blockPluginDialogIsActive,\n    startEditing,\n    cancelEditing,\n\n    locale,\n\n    saveAndClose,\n    saveAndEdit,\n    copyLocales = [],\n    copyFromLocale\n  }) => {\n    const editorProps = {\n      contentId,\n      isEditing,\n      entityInputs,\n      editorState,\n      setEditorState,\n      megadraftActions,\n      blockRenderMap,\n      megadraftBlockPlugins,\n      saveAndClose,\n      saveAndEdit,\n      cancelEditing,\n      locale,\n      copyLocales,\n      copyFromLocale\n    }\n  \n    return (\n      <ContentAreaWrapper\n        className={className}\n        style={style}\n        canEdit={canEdit}\n        isEditing={isEditing}\n        startEditing={startEditing}\n      >\n        <ContentAreaEditor\n          readOnly={blockPluginDialogIsActive || !canEdit || !isEditing}\n          {...editorProps}\n        />\n      </ContentAreaWrapper>\n    )\n  }\n)\n\nContentArea.displayName = 'ContentArea'\n\nexport default ContentArea\n"]}