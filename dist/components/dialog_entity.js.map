{"version":3,"sources":["../../src/components/dialog_entity.js"],"names":["enhance","onSubmit","cancelEntity","setEntity","schema","clean","data","FOCUS_FIX","event","target","focus","DialogEntity","entityType","removeEntity","cancelError","editorState","entity","onChange","setError","props","formData","padding","minWidth","backgroundColor","marginTop"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AAEA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,UAAU,uBACd,4BAAa;AAAA,SAAM,KAAN;AAAA,CAAb,CADc,EACa;AAC3B,4BAAa;AACXC,YAAU;AAAA,QAAGC,YAAH,QAAGA,YAAH;AAAA,QAAiBC,SAAjB,QAAiBA,SAAjB;AAAA,QAA4BC,MAA5B,QAA4BA,MAA5B;AAAA,WAAyC,gBAAQ;AACzDF;AACAC,gBAAUC,OAAOC,KAAP,CAAaC,IAAb,CAAV;AACD,KAHS;AAAA;AADC,CAAb,CAFc,CAAhB;AASA,IAAMC,YAAY,SAAZA,SAAY,QAAS;AACzB;AACAC,QAAMC,MAAN,CAAaC,KAAb;AACD,CAHD;AAIA,IAAMC,eAAeX,QACnB,iBAgBM;AAAA,MAfJY,UAeI,SAfJA,UAeI;AAAA,MAdJX,QAcI,SAdJA,QAcI;AAAA,MAbJY,YAaI,SAbJA,YAaI;AAAA,MAZJT,MAYI,SAZJA,MAYI;AAAA,MATJU,WASI,SATJA,WASI;AAAA,MARJZ,YAQI,SARJA,YAQI;AAAA,MAPJC,SAOI,SAPJA,SAOI;AAAA,MANJY,WAMI,SANJA,WAMI;AAAA,MALJC,MAKI,SALJA,MAKI;AAAA,MAJJC,QAII,SAJJA,QAII;AAAA,MAHJC,QAGI,SAHJA,QAGI;AAAA,MADDC,KACC;;AACJ,MAAMC,WAAWhB,OAAOC,KAAP,CAAac,KAAb,CAAjB;;AAEA,SACE;AAAA;AAAA;AACE,aAAO;AACLE,iBAAS,CADJ;AAELC,kBAAU;AAFL;AADT;AAME;AAAA;AAAA;AACE,eAAO;AACLC,2BAAiB,SADZ;AAELF,mBAAS;AAFJ;AADT;AAME;AAAA;AAAA,UAAS,OAAO,EAAEG,WAAW,CAAb,EAAhB,EAAkC,OAAO,CAAzC;AACE;AAAA;AAAA;AAAA,2BAAmBZ,UAAnB;AAAA;AADF,OANF;AASE;AACE,wCAA8BA,UADhC;AAEE,2BACE;AAAA;AAAA,YAAQ,WAAR,EAAc,SAASC,YAAvB;AAAA;AAAA,SAHJ;AAOE,eAAOO,QAPT;AAQE,gBAAQhB,MARV;AASE,kBAAU,KATZ;AAUE,iBAASG,SAVX;AAWE,kBAAUN;AAXZ;AATF;AANF,GADF;AAgCD,CApDkB,CAArB;;kBAuDeU,Y","file":"dialog_entity.js","sourcesContent":["import React from 'react';\nimport { T } from '@panter/manul-i18n';\nimport { shouldUpdate, compose, withHandlers } from 'recompose';\nimport FormEntity from './form_entity';\nimport Heading from './heading';\nimport Button from './button';\n\nconst enhance = compose(\n  shouldUpdate(() => false), // not perfect, but avoids some big troubles with file upload entities or so\n  withHandlers({\n    onSubmit: ({ cancelEntity, setEntity, schema }) => data => {\n      cancelEntity();\n      setEntity(schema.clean(data));\n    }\n  })\n);\nconst FOCUS_FIX = event => {\n  // dirty workaround for https://github.com/globocom/megadraft/issues/188\n  event.target.focus();\n};\nconst DialogEntity = enhance(\n  ({\n    entityType,\n    onSubmit,\n    removeEntity,\n    schema,\n    // unused\n    /* eslint-disable no-unused-vars*/\n    cancelError,\n    cancelEntity,\n    setEntity,\n    editorState,\n    entity,\n    onChange,\n    setError,\n    /* eslint-enable no-unused-vars*/\n    ...props\n  }) => {\n    const formData = schema.clean(props);\n\n    return (\n      <div\n        style={{\n          padding: 5,\n          minWidth: 300\n        }}\n      >\n        <div\n          style={{\n            backgroundColor: '#ffffff',\n            padding: 15\n          }}\n        >\n          <Heading style={{ marginTop: 0 }} level={3}>\n            <T>{`cm.entities.${entityType}.label`}</T>\n          </Heading>\n          <FormEntity\n            i18nNamespace={`cm.entities.${entityType}`}\n            additionalActions={\n              <Button small onClick={removeEntity}>\n                Remove\n              </Button>\n            }\n            model={formData}\n            schema={schema}\n            autosave={false}\n            onClick={FOCUS_FIX}\n            onSubmit={onSubmit}\n          />\n        </div>\n      </div>\n    );\n  }\n);\n\nexport default DialogEntity;\n"]}